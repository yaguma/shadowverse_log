# デッキ管理機能拡張 ユーザストーリー

**作成日**: 2025-01-26
**関連要件定義**: [requirements.md](requirements.md)
**ヒアリング記録**: [interview-record.md](interview-record.md)

**【信頼性レベル凡例】**:
- 🔵 **青信号**: ユーザヒアリング・設計文書を参考にした確実なストーリー
- 🟡 **黄信号**: ユーザヒアリング・設計文書から妥当な推測によるストーリー
- 🔴 **赤信号**: ユーザヒアリング・設計文書にない推測によるストーリー

---

## エピック1: デッキ種別管理 🔵

### ストーリー 1.1: 新しいデッキ種別を追加したい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**新しいデッキタイプが環境に出てきたときに**
**そのデッキ種別をシステムに追加したい**
**そうすることで** 最新の環境に対応した対戦履歴を記録できる

**関連要件**: REQ-EXT-001, REQ-EXT-002, REQ-EXT-003, REQ-EXT-004, REQ-EXT-005

**詳細シナリオ**:
1. デッキ種別管理画面を開く
2. 「追加」ボタンをクリック
3. クラス名を選択肢から選択（例：ウィッチ）
4. デッキ名を自由入力（例：スペルウィッチ）
5. 「登録」ボタンをクリック
6. デッキ種別一覧に新しいデッキが表示される

**前提条件**:
- デッキ種別管理画面にアクセスできること
- クラス一覧がシステムに登録されていること

**制約事項**:
- sortOrderとidは自動採番される

**優先度**: Must Have

---

### ストーリー 1.2: デッキ種別の名前を修正したい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**登録したデッキ種別の名前に誤字があったときに**
**そのデッキ名を修正したい**
**そうすることで** 正確なデッキ名で統計を管理できる

**関連要件**: REQ-EXT-006, REQ-EXT-007

**詳細シナリオ**:
1. デッキ種別管理画面を開く
2. 修正したいデッキの「編集」ボタンをクリック
3. デッキ名を修正（例：スペルイッチ → スペルウィッチ）
4. 「保存」ボタンをクリック
5. デッキ種別一覧に修正後の名前が表示される

**前提条件**:
- 対象のデッキ種別が登録されていること

**制約事項**:
- クラス名（className）は変更できない
- クラス名を変更したい場合は削除して再登録する必要がある

**優先度**: Must Have

---

### ストーリー 1.3: 不要なデッキ種別を削除したい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**環境落ちしたデッキや誤登録したデッキ種別があるときに**
**そのデッキ種別を削除したい**
**そうすることで** デッキ選択肢をすっきりと管理できる

**関連要件**: REQ-EXT-008, REQ-EXT-401

**詳細シナリオ**:
1. デッキ種別管理画面を開く
2. 削除したいデッキの「削除」ボタンをクリック
3. 確認ダイアログが表示される
4. 「削除する」をクリック
5. デッキ種別一覧から削除される

**前提条件**:
- 対象のデッキ種別が登録されていること

**制約事項**:
- 対戦履歴で参照されているデッキ種別は削除できない（削除ボタン無効化またはエラー表示）

**優先度**: Should Have

---

## エピック2: 使用デッキ管理 🔵

### ストーリー 2.1: 使用するデッキを追加したい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**新しいデッキを作成したときに**
**そのデッキを使用デッキとして登録したい**
**そうすることで** 対戦履歴登録時に自分のデッキを選択できる

**関連要件**: REQ-EXT-101, REQ-EXT-102, REQ-EXT-103, REQ-EXT-104, REQ-EXT-105, REQ-EXT-106, REQ-EXT-107

**詳細シナリオ**:
1. 使用デッキ管理画面を開く
2. 「追加」ボタンをクリック
3. クラス名を選択肢から選択（例：エルフ）
4. デッキ名を自由入力（例：アグロエルフ）
5. デッキコードを任意で入力（空白可）
6. 「登録」ボタンをクリック
7. 使用デッキ一覧に新しいデッキが表示される

**前提条件**:
- 使用デッキ管理画面にアクセスできること
- クラス一覧がシステムに登録されていること

**制約事項**:
- idは自動採番される
- isActiveはtrue固定（入力欄なし）
- deckCodeにバリデーションはない
- クラス選択時、UIではclassNameを表示し、データ保存時はDeckMasterのidを使用

**優先度**: Must Have

---

### ストーリー 2.2: 使用しなくなったデッキを削除したい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**使わなくなったデッキがあるときに**
**そのデッキを削除したい**
**そうすることで** デッキ選択肢をすっきりと管理できる

**関連要件**: REQ-EXT-108, REQ-EXT-402

**詳細シナリオ**:
1. 使用デッキ管理画面を開く
2. 削除したいデッキの「削除」ボタンをクリック
3. 確認ダイアログが表示される
4. 「削除する」をクリック
5. 使用デッキ一覧から削除される

**前提条件**:
- 対象の使用デッキが登録されていること

**制約事項**:
- 対戦履歴で参照されている使用デッキは削除できない（削除ボタン無効化またはエラー表示）

**優先度**: Should Have

---

## エピック3: 統計画面機能拡張 🔵

### ストーリー 3.1: 統計画面から対戦を記録したい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**統計画面を見ながら**
**その場で対戦結果を記録したい**
**そうすることで** 画面遷移なしで効率的に記録できる

**関連要件**: REQ-EXT-201, REQ-EXT-202

**詳細シナリオ**:
1. 統計画面を開く
2. 「対戦を記録」ボタンをクリック
3. 対戦履歴登録ダイアログが表示される（一覧画面と同じダイアログ）
4. 対戦情報を入力
5. 「登録」ボタンをクリック
6. 統計データが更新される

**前提条件**:
- 統計画面にアクセスできること

**制約事項**:
- 一覧画面と同じダイアログコンポーネントを使用する

**優先度**: Must Have

---

### ストーリー 3.2: 最新シーズンの統計を見たい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**統計画面を開いたときに**
**最新シーズンの統計をすぐに確認したい**
**そうすることで** 今シーズンの戦績を素早く把握できる

**関連要件**: REQ-EXT-203

**詳細シナリオ**:
1. 統計画面を開く
2. 自動的に最新シーズンが選択されている
3. 最新シーズンの全期間の統計が表示される

**前提条件**:
- 対戦履歴にシーズンが設定されていること

**制約事項**:
- 初期表示は最新シーズンの全期間

**優先度**: Must Have

---

### ストーリー 3.3: 過去のシーズンの統計を見たい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**過去のシーズンの統計を確認したいときに**
**シーズンを選択して切り替えたい**
**そうすることで** 過去のシーズンの戦績を振り返れる

**関連要件**: REQ-EXT-204, REQ-EXT-205

**詳細シナリオ**:
1. 統計画面を開く
2. シーズン選択ドロップダウンをクリック
3. 過去のシーズン（例：シーズン25）を選択
4. 選択したシーズンの統計が表示される

**前提条件**:
- 複数のシーズンの対戦履歴が登録されていること

**制約事項**:
- シーズン選択肢に上限はない（登録されているすべてのシーズンが表示される）

**優先度**: Must Have

---

## エピック4: 対戦履歴登録UI改善 🔵

### ストーリー 4.1: シーズンと日付を一行で見たい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**対戦履歴を登録するときに**
**シーズンと対戦日を一度に確認・入力したい**
**そうすることで** 入力画面がコンパクトになり、全体を把握しやすくなる

**関連要件**: REQ-EXT-301

**詳細シナリオ**:
1. 対戦履歴登録ダイアログを開く
2. シーズン選択と対戦日入力が横並びで表示される
3. シーズンを選択し、対戦日を入力
4. 以降のフィールドを入力して登録

**前提条件**:
- 対戦履歴登録ダイアログを開いていること

**制約事項**:
- レスポンシブデザイン（モバイルでは縦並びになる可能性あり）

**優先度**: Must Have

---

### ストーリー 4.2: よく対戦する相手デッキを素早く選びたい 🔵

**信頼性**: 🔵 *ユーザヒアリング2025-01-26より*

**私は** シャドウバースプレイヤー **として**
**対戦履歴を登録するときに**
**最近よく対戦する相手デッキを素早く選択したい**
**そうすることで** 入力時間を短縮できる

**関連要件**: REQ-EXT-302

**詳細シナリオ**:
1. 対戦履歴登録ダイアログを開く
2. 相手デッキの選択肢を開く
3. 最近対戦したデッキが上位に表示される
4. 選択肢から相手デッキを選ぶ

**前提条件**:
- 対戦履歴が登録されていること

**制約事項**:
- 対戦履歴が0件の場合はsortOrder順で表示

**優先度**: Must Have

---

## ストーリーマップ

```
エピック1: デッキ種別管理
├── ストーリー 1.1 (🔵 Must Have) - デッキ種別追加
├── ストーリー 1.2 (🔵 Must Have) - デッキ種別編集
└── ストーリー 1.3 (🔵 Should Have) - デッキ種別削除

エピック2: 使用デッキ管理
├── ストーリー 2.1 (🔵 Must Have) - 使用デッキ追加
└── ストーリー 2.2 (🔵 Should Have) - 使用デッキ削除

エピック3: 統計画面機能拡張
├── ストーリー 3.1 (🔵 Must Have) - 統計画面から対戦記録
├── ストーリー 3.2 (🔵 Must Have) - 最新シーズン初期表示
└── ストーリー 3.3 (🔵 Must Have) - シーズン選択切り替え

エピック4: 対戦履歴登録UI改善
├── ストーリー 4.1 (🔵 Must Have) - シーズン・日付横並び
└── ストーリー 4.2 (🔵 Must Have) - 相手デッキソート
```

---

## 信頼性レベルサマリー

- 🔵 青信号: 10件 (100%)
- 🟡 黄信号: 0件 (0%)
- 🔴 赤信号: 0件 (0%)

**品質評価**: 高品質（すべてのストーリーがユーザヒアリングに基づく）

---

## ユーザージャーニー

### ジャーニー1: 新環境対応フロー 🔵

```
新デッキ登場 → デッキ種別追加 → 使用デッキ追加 → 対戦履歴記録 → 統計確認
```

**詳細**:
1. 新パッチでメタが変わる
2. デッキ種別管理画面で新しいデッキ種別を追加（例：回復ビショップ）
3. 使用デッキ管理画面で自分のデッキを追加
4. 対戦履歴を記録（最近使った相手デッキが上位に表示）
5. 統計画面で今シーズンの勝率を確認

### ジャーニー2: 統計確認・記録フロー 🔵

```
統計画面表示 → シーズン確認 → 対戦記録 → 統計更新
```

**詳細**:
1. 統計画面を開く（最新シーズンが自動選択）
2. 今シーズンの戦績を確認
3. 「対戦を記録」ボタンで対戦履歴を登録
4. 統計データがリアルタイムで更新される
