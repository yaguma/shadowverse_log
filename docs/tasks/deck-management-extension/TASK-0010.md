# TASK-0010: DeckMasterListコンポーネント実装

**タスクID**: TASK-0010
**タスクタイプ**: TDD
**推定工数**: 2時間
**フェーズ**: Phase 2 - デッキ種別管理機能
**信頼性レベル**: 🔵 *architecture.md 2.1より*

## 関連文書
- [技術設計書](../../design/deck-management-extension/README.md)
- [アーキテクチャ設計](../../design/deck-management-extension/architecture.md)
- [要件定義](../../design/deck-management-extension/requirements.md)

## タスク概要
デッキ種別の一覧表示コンポーネントを実装する。ローディング状態、空リスト時のメッセージ表示、追加ボタンの配置を行う。

## 依存タスク
- **前提タスク**: [TASK-0009](TASK-0009.md) - DeckStore拡張
- **後続タスク**: [TASK-0011](TASK-0011.md) - DeckMasterItemコンポーネント

## 完了条件
- [ ] デッキ種別一覧が表示されること
- [ ] ローディング状態が表示されること
- [ ] 空リスト時にメッセージが表示されること
- [ ] 追加ボタンが配置されていること
- [ ] 全テストがパスすること

---
## 実装詳細

### ファイル構成
```
packages/web/src/
├── components/
│   └── deck-master/
│       ├── DeckMasterList.tsx      # 一覧コンポーネント（新規）
│       ├── DeckMasterList.test.tsx # テスト（新規）
│       └── index.ts                # エクスポート（新規）
```

### コンポーネント構造
```typescript
interface DeckMasterListProps {
  deckMasters: DeckMasterWithUsage[];
  isLoading: boolean;
  error: string | null;
  onAdd: () => void;
  onEdit: (deckMaster: DeckMasterWithUsage) => void;
  onDelete: (id: string) => void;
}

const DeckMasterList: React.FC<DeckMasterListProps> = ({
  deckMasters,
  isLoading,
  error,
  onAdd,
  onEdit,
  onDelete,
}) => {
  // 実装
};
```

### UI構成

#### ヘッダー部分
- タイトル: 「デッキ種別管理」
- 追加ボタン: 「+ 新規追加」

#### リスト部分
- DeckMasterItemコンポーネントを繰り返し表示
- グリッドまたはリスト形式

#### ローディング状態
- スピナーまたはスケルトン表示
- 「読み込み中...」テキスト

#### 空リスト状態（REQ-EXT-501）
- アイコン + メッセージ
- 「デッキ種別が登録されていません」
- 「新規追加ボタンから登録してください」

#### エラー状態
- エラーメッセージ表示
- 再試行ボタン

---
## 単体テスト要件

### テストファイル
`packages/web/src/components/deck-master/DeckMasterList.test.tsx`

### テストケース

#### 正常系
1. **デッキ種別が表示される**
   - 入力: deckMasters: [{ className: "ウィッチ", deckName: "秘術" }]
   - 期待: "ウィッチ"、"秘術"がDOMに存在

2. **複数件表示される**
   - 入力: deckMasters: 3件
   - 期待: 3つのDeckMasterItemがレンダリング

3. **追加ボタンが表示される**
   - 期待: "新規追加"ボタンがDOMに存在

4. **追加ボタンクリックでonAddが呼ばれる**
   - 期待: onAddが1回呼ばれる

#### ローディング状態
5. **ローディング中にスピナーが表示される**
   - 入力: isLoading: true
   - 期待: ローディングインジケーターがDOMに存在

6. **ローディング中はリストが非表示**
   - 入力: isLoading: true, deckMasters: [...]
   - 期待: リストアイテムが表示されない

#### 空リスト状態
7. **0件時に空メッセージが表示される**
   - 入力: deckMasters: []
   - 期待: 「デッキ種別が登録されていません」がDOMに存在

#### エラー状態
8. **エラー時にエラーメッセージが表示される**
   - 入力: error: "エラーが発生しました"
   - 期待: エラーメッセージがDOMに存在

---
## 実装手順

### Red Phase（失敗するテストを書く）
1. テストファイル `DeckMasterList.test.tsx` を作成
2. React Testing Libraryでテスト実装
3. テスト実行 → 失敗確認

### Green Phase（テストを通す最小実装）
1. DeckMasterListコンポーネント作成
2. propsの受け取りと表示ロジック実装
3. 条件分岐（loading/empty/error）実装
4. テスト実行 → 成功確認

### Refactor Phase（リファクタリング）
1. スタイリングの整理（Tailwind CSS）
2. アクセシビリティ対応（aria-label等）
3. コンポーネント分割検討
4. テスト実行 → 成功確認

---
## 信頼性レベルサマリー

| 項目 | レベル | 出典 |
|------|--------|------|
| コンポーネント構造 | 🔵 | architecture.md 2.1 |
| Props定義 | 🔵 | interfaces.ts |
| 空リストメッセージ | 🔵 | REQ-EXT-501 |
| UI状態遷移 | 🔵 | dataflow.md |
