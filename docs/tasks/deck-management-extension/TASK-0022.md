# TASK-0022: DeckManagePageã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆå®Ÿè£…

## ã‚¿ã‚¹ã‚¯æƒ…å ±

- **ã‚¿ã‚¹ã‚¯ID**: TASK-0022
- **ã‚¿ã‚¤ãƒ—**: TDD
- **æ¨å®šå·¥æ•°**: 2æ™‚é–“
- **ãƒ•ã‚§ãƒ¼ã‚º**: Phase 4 - ãƒ‡ãƒƒã‚­ç®¡ç†ç”»é¢çµ±åˆ
- **ä¿¡é ¼æ€§**: ğŸ”µï¼ˆarchitecture.md 2.3ã‚ˆã‚Šï¼‰
- **ä¾å­˜ã‚¿ã‚¹ã‚¯**: TASK-0014, TASK-0021
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0023
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: [ ] æœªå®Œäº†

---

## æ¦‚è¦

ãƒ‡ãƒƒã‚­ç®¡ç†ç”»é¢ï¼ˆDeckManagePageï¼‰ã‚’æ–°è¦ä½œæˆã—ã€ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã«ã‚ˆã£ã¦ãƒ‡ãƒƒã‚­ç¨®åˆ¥ç®¡ç†ã¨ãƒã‚¤ãƒ‡ãƒƒã‚­ç®¡ç†ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

---

## å®Ÿè£…å†…å®¹

### 1. DeckManagePageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½œæˆ

`packages/frontend/src/pages/DeckManagePage.tsx` ã‚’ä½œæˆ:

```typescript
import { useState } from 'react';
import { DeckMasterList } from '@/components/deck/DeckMasterList';
import { MyDeckList } from '@/components/deck/MyDeckList';

type TabType = 'deckMaster' | 'myDeck';

export const DeckManagePage = () => {
  const [activeTab, setActiveTab] = useState<TabType>('deckMaster');

  return (
    <div className="container mx-auto px-4 py-6">
      <h1 className="text-2xl font-bold mb-6">ãƒ‡ãƒƒã‚­ç®¡ç†</h1>

      {/* ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */}
      <div className="border-b border-gray-200 mb-6">
        <nav className="-mb-px flex space-x-8">
          <button
            onClick={() => setActiveTab('deckMaster')}
            className={`
              py-2 px-1 border-b-2 font-medium text-sm
              ${activeTab === 'deckMaster'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
              }
            `}
          >
            ãƒ‡ãƒƒã‚­ç¨®åˆ¥
          </button>
          <button
            onClick={() => setActiveTab('myDeck')}
            className={`
              py-2 px-1 border-b-2 font-medium text-sm
              ${activeTab === 'myDeck'
                ? 'border-blue-500 text-blue-600'
                : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
              }
            `}
          >
            ä½¿ç”¨ãƒ‡ãƒƒã‚­
          </button>
        </nav>
      </div>

      {/* ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
      <div>
        {activeTab === 'deckMaster' && <DeckMasterList />}
        {activeTab === 'myDeck' && <MyDeckList />}
      </div>
    </div>
  );
};
```

### 2. ã‚¿ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ±ç”¨åŒ–ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

å†åˆ©ç”¨æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã€æ±ç”¨ã‚¿ãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ:

`packages/frontend/src/components/common/Tabs.tsx`:

```typescript
import { ReactNode } from 'react';

interface Tab {
  id: string;
  label: string;
}

interface TabsProps {
  tabs: Tab[];
  activeTab: string;
  onTabChange: (tabId: string) => void;
  children: ReactNode;
}

export const Tabs = ({ tabs, activeTab, onTabChange, children }: TabsProps) => {
  return (
    <div>
      <div className="border-b border-gray-200 mb-6">
        <nav className="-mb-px flex space-x-8">
          {tabs.map((tab) => (
            <button
              key={tab.id}
              onClick={() => onTabChange(tab.id)}
              className={`
                py-2 px-1 border-b-2 font-medium text-sm transition-colors
                ${activeTab === tab.id
                  ? 'border-blue-500 text-blue-600'
                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                }
              `}
            >
              {tab.label}
            </button>
          ))}
        </nav>
      </div>
      <div>{children}</div>
    </div>
  );
};
```

### 3. ãƒšãƒ¼ã‚¸ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š

`packages/frontend/src/pages/index.ts` ã«è¿½åŠ :

```typescript
export { DeckManagePage } from './DeckManagePage';
```

---

## ãƒ†ã‚¹ãƒˆè¦ä»¶

### å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆVitestï¼‰

`packages/frontend/src/pages/__tests__/DeckManagePage.test.tsx`:

```typescript
import { render, screen, fireEvent } from '@testing-library/react';
import { describe, it, expect, vi } from 'vitest';
import { DeckManagePage } from '../DeckManagePage';

// ãƒ¢ãƒƒã‚¯
vi.mock('@/components/deck/DeckMasterList', () => ({
  DeckMasterList: () => <div data-testid="deck-master-list">ãƒ‡ãƒƒã‚­ç¨®åˆ¥ä¸€è¦§</div>,
}));

vi.mock('@/components/deck/MyDeckList', () => ({
  MyDeckList: () => <div data-testid="my-deck-list">ãƒã‚¤ãƒ‡ãƒƒã‚­ä¸€è¦§</div>,
}));

describe('DeckManagePage', () => {
  describe('åˆæœŸè¡¨ç¤º', () => {
    it('ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      render(<DeckManagePage />);
      expect(screen.getByRole('heading', { name: 'ãƒ‡ãƒƒã‚­ç®¡ç†' })).toBeInTheDocument();
    });

    it('ãƒ‡ãƒƒã‚­ç¨®åˆ¥ã‚¿ãƒ–ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã§è¡¨ç¤ºã•ã‚Œã‚‹', () => {
      render(<DeckManagePage />);
      const deckMasterTab = screen.getByRole('button', { name: 'ãƒ‡ãƒƒã‚­ç¨®åˆ¥' });
      expect(deckMasterTab).toHaveClass('border-blue-500');
    });

    it('åˆæœŸè¡¨ç¤ºã§DeckMasterListãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      render(<DeckManagePage />);
      expect(screen.getByTestId('deck-master-list')).toBeInTheDocument();
      expect(screen.queryByTestId('my-deck-list')).not.toBeInTheDocument();
    });
  });

  describe('ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ', () => {
    it('ä½¿ç”¨ãƒ‡ãƒƒã‚­ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨MyDeckListãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      render(<DeckManagePage />);

      const myDeckTab = screen.getByRole('button', { name: 'ä½¿ç”¨ãƒ‡ãƒƒã‚­' });
      fireEvent.click(myDeckTab);

      expect(screen.getByTestId('my-deck-list')).toBeInTheDocument();
      expect(screen.queryByTestId('deck-master-list')).not.toBeInTheDocument();
    });

    it('ãƒ‡ãƒƒã‚­ç¨®åˆ¥ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨DeckMasterListãŒè¡¨ç¤ºã•ã‚Œã‚‹', () => {
      render(<DeckManagePage />);

      // ä¸€åº¦ä½¿ç”¨ãƒ‡ãƒƒã‚­ã‚¿ãƒ–ã«åˆ‡ã‚Šæ›¿ãˆ
      fireEvent.click(screen.getByRole('button', { name: 'ä½¿ç”¨ãƒ‡ãƒƒã‚­' }));

      // ãƒ‡ãƒƒã‚­ç¨®åˆ¥ã‚¿ãƒ–ã«æˆ»ã‚‹
      fireEvent.click(screen.getByRole('button', { name: 'ãƒ‡ãƒƒã‚­ç¨®åˆ¥' }));

      expect(screen.getByTestId('deck-master-list')).toBeInTheDocument();
      expect(screen.queryByTestId('my-deck-list')).not.toBeInTheDocument();
    });

    it('ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆæ™‚ã«ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¹ã‚¿ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚Œã‚‹', () => {
      render(<DeckManagePage />);

      const deckMasterTab = screen.getByRole('button', { name: 'ãƒ‡ãƒƒã‚­ç¨®åˆ¥' });
      const myDeckTab = screen.getByRole('button', { name: 'ä½¿ç”¨ãƒ‡ãƒƒã‚­' });

      // åˆæœŸçŠ¶æ…‹
      expect(deckMasterTab).toHaveClass('border-blue-500');
      expect(myDeckTab).not.toHaveClass('border-blue-500');

      // åˆ‡ã‚Šæ›¿ãˆå¾Œ
      fireEvent.click(myDeckTab);
      expect(deckMasterTab).not.toHaveClass('border-blue-500');
      expect(myDeckTab).toHaveClass('border-blue-500');
    });
  });
});
```

---

## å®Œäº†æ¡ä»¶

- [ ] DeckManagePageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ‡ãƒƒã‚­ç¨®åˆ¥ã‚¿ãƒ–ã¨ä½¿ç”¨ãƒ‡ãƒƒã‚­ã‚¿ãƒ–ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] åˆæœŸè¡¨ç¤ºã§ã€Œãƒ‡ãƒƒã‚­ç¨®åˆ¥ã€ã‚¿ãƒ–ãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–
- [ ] ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã§å¯¾å¿œã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆãŒã™ã¹ã¦æˆåŠŸã™ã‚‹
- [ ] å‹ãƒã‚§ãƒƒã‚¯ãŒæˆåŠŸã™ã‚‹

---

## å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# TDDãƒ•ãƒ­ãƒ¼
/tsumiki:tdd-red           # ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
/tsumiki:tdd-green         # æœ€å°å®Ÿè£…ï¼ˆæˆåŠŸï¼‰
/tsumiki:tdd-refactor      # ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
/tsumiki:tdd-verify-complete  # å“è³ªç¢ºèª
```

---

## æ¤œè¨¼æ‰‹é †

1. `packages/frontend/src/pages/DeckManagePage.tsx` ãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
2. `pnpm test` ã§ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã‹ç¢ºèª
3. `pnpm type-check` ã§å‹ãƒã‚§ãƒƒã‚¯ãŒæˆåŠŸã™ã‚‹ã‹ç¢ºèª
4. æ‰‹å‹•ã§ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹ã‹ç¢ºèª

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [æŠ€è¡“è¨­è¨ˆæ›¸ architecture.md 2.3](../../design/deck-management-extension/architecture.md)
- [TASK-0014: DeckMasterListã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…](./TASK-0014.md)
- [TASK-0021: MyDeckListã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…](./TASK-0021.md)
