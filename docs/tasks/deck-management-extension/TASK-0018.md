# TASK-0018: MyDeckListã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

## ã‚¿ã‚¹ã‚¯æ¦‚è¦

- **ã‚¿ã‚¹ã‚¯ID**: TASK-0018
- **ã‚¿ã‚¤ãƒˆãƒ«**: MyDeckListã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
- **ã‚¿ã‚¤ãƒ—**: TDD
- **æ¨å®šå·¥æ•°**: 2æ™‚é–“
- **ãƒ•ã‚§ãƒ¼ã‚º**: Phase 3 - ä½¿ç”¨ãƒ‡ãƒƒã‚­ç®¡ç†æ©Ÿèƒ½
- **ä¿¡é ¼æ€§**: ğŸ”µï¼ˆinterfaces.ts MyDeckListPropsã‚ˆã‚Šï¼‰
- **ä¾å­˜ã‚¿ã‚¹ã‚¯**: TASK-0017
- **å¾Œç¶šã‚¿ã‚¹ã‚¯**: TASK-0019
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: [ ] æœªç€æ‰‹

---

## è¦ä»¶

### æ©Ÿèƒ½è¦ä»¶

- ä½¿ç”¨ãƒ‡ãƒƒã‚­ä¸€è¦§è¡¨ç¤º
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹è¡¨ç¤º
- ç©ºãƒªã‚¹ãƒˆæ™‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼ˆREQ-EXT-502ï¼‰
- è¿½åŠ ãƒœã‚¿ãƒ³é…ç½®

### é–¢é€£è¦ä»¶ID

- REQ-EXT-502: ç©ºãƒªã‚¹ãƒˆæ™‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

---

## å®Ÿè£…è©³ç´°

### 1. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆPropså®šç¾©

```typescript
// packages/web/src/components/deck/types.ts

import type { MyDeck } from '@shadowverse-log/shared';

export interface MyDeckListProps {
  /** ä½¿ç”¨ãƒ‡ãƒƒã‚­ä¸€è¦§ */
  myDecks: MyDeck[];
  /** ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ */
  isLoading: boolean;
  /** ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
  error?: string | null;
  /** å‰Šé™¤å¯èƒ½ã‹ã©ã†ã‹ã®ãƒãƒƒãƒ—ï¼ˆid -> canDeleteï¼‰ */
  canDeleteMap: Record<string, boolean>;
  /** è¿½åŠ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
  onAddClick: () => void;
  /** å‰Šé™¤ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ */
  onDeleteClick: (id: string) => void;
}
```

### 2. ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…

```typescript
// packages/web/src/components/deck/MyDeckList.tsx

import { FC } from 'react';
import { MyDeckItem } from './MyDeckItem';
import { Spinner } from '../common/Spinner';
import { Button } from '../common/Button';
import type { MyDeckListProps } from './types';

export const MyDeckList: FC<MyDeckListProps> = ({
  myDecks,
  isLoading,
  error,
  canDeleteMap,
  onAddClick,
  onDeleteClick,
}) => {
  if (isLoading) {
    return (
      <div className="flex justify-center items-center py-8" data-testid="loading-spinner">
        <Spinner size="lg" />
      </div>
    );
  }

  if (error) {
    return (
      <div className="bg-red-50 border border-red-200 rounded-lg p-4 text-red-700" data-testid="error-message">
        {error}
      </div>
    );
  }

  return (
    <div className="space-y-4">
      {/* ãƒ˜ãƒƒãƒ€ãƒ¼ */}
      <div className="flex justify-between items-center">
        <h2 className="text-lg font-semibold">ä½¿ç”¨ãƒ‡ãƒƒã‚­ä¸€è¦§</h2>
        <Button
          variant="primary"
          size="sm"
          onClick={onAddClick}
          data-testid="add-deck-button"
        >
          ãƒ‡ãƒƒã‚­ã‚’è¿½åŠ 
        </Button>
      </div>

      {/* ãƒ‡ãƒƒã‚­ä¸€è¦§ */}
      {myDecks.length === 0 ? (
        <div
          className="bg-gray-50 border border-gray-200 rounded-lg p-8 text-center text-gray-500"
          data-testid="empty-message"
        >
          <p className="mb-2">ä½¿ç”¨ãƒ‡ãƒƒã‚­ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
          <p className="text-sm">ã€Œãƒ‡ãƒƒã‚­ã‚’è¿½åŠ ã€ãƒœã‚¿ãƒ³ã‹ã‚‰æ–°ã—ã„ãƒ‡ãƒƒã‚­ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„</p>
        </div>
      ) : (
        <ul className="space-y-2" data-testid="deck-list">
          {myDecks.map((deck) => (
            <li key={deck.id}>
              <MyDeckItem
                deck={deck}
                canDelete={canDeleteMap[deck.id] ?? true}
                onDeleteClick={() => onDeleteClick(deck.id)}
              />
            </li>
          ))}
        </ul>
      )}
    </div>
  );
};
```

### 3. Storybook Story

```typescript
// packages/web/src/components/deck/MyDeckList.stories.tsx

import type { Meta, StoryObj } from '@storybook/react';
import { MyDeckList } from './MyDeckList';

const meta: Meta<typeof MyDeckList> = {
  title: 'Deck/MyDeckList',
  component: MyDeckList,
  tags: ['autodocs'],
};

export default meta;
type Story = StoryObj<typeof MyDeckList>;

const sampleDecks = [
  {
    id: '1',
    deckId: 'deck-001',
    deckName: 'ç§˜è¡“ã‚ªãƒ‡ãƒ³ã‚¹ãƒšãƒ«',
    deckCode: 'ABC123',
    className: 'ã‚¦ã‚£ãƒƒãƒ',
    isActive: true,
    createdAt: '2025-01-01T00:00:00.000Z',
  },
  {
    id: '2',
    deckId: 'deck-002',
    deckName: 'ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒŠã‚¤ãƒˆãƒ¡ã‚¢',
    deckCode: 'DEF456',
    className: 'ãƒŠã‚¤ãƒˆãƒ¡ã‚¢',
    isActive: true,
    createdAt: '2025-01-02T00:00:00.000Z',
  },
];

export const Default: Story = {
  args: {
    myDecks: sampleDecks,
    isLoading: false,
    canDeleteMap: { '1': true, '2': false },
    onAddClick: () => console.log('Add clicked'),
    onDeleteClick: (id) => console.log('Delete clicked:', id),
  },
};

export const Loading: Story = {
  args: {
    myDecks: [],
    isLoading: true,
    canDeleteMap: {},
    onAddClick: () => {},
    onDeleteClick: () => {},
  },
};

export const Empty: Story = {
  args: {
    myDecks: [],
    isLoading: false,
    canDeleteMap: {},
    onAddClick: () => console.log('Add clicked'),
    onDeleteClick: () => {},
  },
};

export const WithError: Story = {
  args: {
    myDecks: [],
    isLoading: false,
    error: 'ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ',
    canDeleteMap: {},
    onAddClick: () => {},
    onDeleteClick: () => {},
  },
};
```

---

## ãƒ†ã‚¹ãƒˆè¦ä»¶

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ä¸€è¦§

| No | ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ | æœŸå¾…çµæœ | å„ªå…ˆåº¦ |
|----|-------------|----------|--------|
| 1 | ä½¿ç”¨ãƒ‡ãƒƒã‚­ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ | ãƒ‡ãƒƒã‚­åãŒè¡¨ç¤º | é«˜ |
| 2 | 0ä»¶æ™‚ã«ç©ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ | ç©ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º | é«˜ |
| 3 | ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ | Spinnerè¡¨ç¤º | é«˜ |
| 4 | è¿½åŠ ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ | ãƒœã‚¿ãƒ³å­˜åœ¨ | é«˜ |
| 5 | è¿½åŠ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯å‘¼ã³å‡ºã— | onAddClickå‘¼ã³å‡ºã— | ä¸­ |
| 6 | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ | ã‚¨ãƒ©ãƒ¼è¡¨ç¤º | ä¸­ |

### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ä¾‹

```typescript
// packages/web/src/components/deck/__tests__/MyDeckList.test.tsx

import { describe, it, expect, vi } from 'vitest';
import { render, screen, fireEvent } from '@testing-library/react';
import { MyDeckList } from '../MyDeckList';

const sampleDecks = [
  {
    id: '1',
    deckId: 'deck-001',
    deckName: 'ç§˜è¡“ã‚ªãƒ‡ãƒ³ã‚¹ãƒšãƒ«',
    deckCode: 'ABC123',
    className: 'ã‚¦ã‚£ãƒƒãƒ',
    isActive: true,
    createdAt: '2025-01-01T00:00:00.000Z',
  },
];

describe('MyDeckList', () => {
  const defaultProps = {
    myDecks: [],
    isLoading: false,
    canDeleteMap: {},
    onAddClick: vi.fn(),
    onDeleteClick: vi.fn(),
  };

  describe('ãƒ‡ãƒƒã‚­è¡¨ç¤º', () => {
    it('ä½¿ç”¨ãƒ‡ãƒƒã‚­ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
      render(
        <MyDeckList
          {...defaultProps}
          myDecks={sampleDecks}
          canDeleteMap={{ '1': true }}
        />
      );

      expect(screen.getByText('ç§˜è¡“ã‚ªãƒ‡ãƒ³ã‚¹ãƒšãƒ«')).toBeInTheDocument();
    });

    it('è¤‡æ•°ã®ãƒ‡ãƒƒã‚­ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
      const multipleDecks = [
        ...sampleDecks,
        {
          id: '2',
          deckId: 'deck-002',
          deckName: 'ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒŠã‚¤ãƒˆãƒ¡ã‚¢',
          deckCode: 'DEF456',
          className: 'ãƒŠã‚¤ãƒˆãƒ¡ã‚¢',
          isActive: true,
          createdAt: '2025-01-02T00:00:00.000Z',
        },
      ];

      render(
        <MyDeckList
          {...defaultProps}
          myDecks={multipleDecks}
          canDeleteMap={{ '1': true, '2': true }}
        />
      );

      expect(screen.getByText('ç§˜è¡“ã‚ªãƒ‡ãƒ³ã‚¹ãƒšãƒ«')).toBeInTheDocument();
      expect(screen.getByText('ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒŠã‚¤ãƒˆãƒ¡ã‚¢')).toBeInTheDocument();
    });
  });

  describe('ç©ºçŠ¶æ…‹', () => {
    it('0ä»¶æ™‚ã«ç©ºãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
      render(<MyDeckList {...defaultProps} />);

      expect(screen.getByTestId('empty-message')).toBeInTheDocument();
      expect(screen.getByText(/ä½¿ç”¨ãƒ‡ãƒƒã‚­ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“/)).toBeInTheDocument();
    });
  });

  describe('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹', () => {
    it('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã«ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
      render(<MyDeckList {...defaultProps} isLoading={true} />);

      expect(screen.getByTestId('loading-spinner')).toBeInTheDocument();
    });

    it('ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ä¸­ã¯ãƒ‡ãƒƒã‚­ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œãªã„ã“ã¨', () => {
      render(
        <MyDeckList
          {...defaultProps}
          myDecks={sampleDecks}
          isLoading={true}
        />
      );

      expect(screen.queryByText('ç§˜è¡“ã‚ªãƒ‡ãƒ³ã‚¹ãƒšãƒ«')).not.toBeInTheDocument();
    });
  });

  describe('è¿½åŠ ãƒœã‚¿ãƒ³', () => {
    it('è¿½åŠ ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
      render(<MyDeckList {...defaultProps} />);

      expect(screen.getByTestId('add-deck-button')).toBeInTheDocument();
    });

    it('è¿½åŠ ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§onAddClickãŒå‘¼ã³å‡ºã•ã‚Œã‚‹ã“ã¨', () => {
      const onAddClick = vi.fn();
      render(<MyDeckList {...defaultProps} onAddClick={onAddClick} />);

      fireEvent.click(screen.getByTestId('add-deck-button'));

      expect(onAddClick).toHaveBeenCalledTimes(1);
    });
  });

  describe('ã‚¨ãƒ©ãƒ¼çŠ¶æ…‹', () => {
    it('ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨', () => {
      render(
        <MyDeckList {...defaultProps} error="ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ" />
      );

      expect(screen.getByTestId('error-message')).toBeInTheDocument();
      expect(screen.getByText('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ')).toBeInTheDocument();
    });
  });
});
```

---

## å®Œäº†æ¡ä»¶

- [ ] MyDeckListã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹
- [ ] ä½¿ç”¨ãƒ‡ãƒƒã‚­ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã§ã‚¹ãƒ”ãƒŠãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ç©ºãƒªã‚¹ãƒˆæ™‚ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] è¿½åŠ ãƒœã‚¿ãƒ³ãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹
- [ ] ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒæˆåŠŸã™ã‚‹
- [ ] Storybookã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒç¢ºèªã§ãã‚‹

---

## å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰

```bash
# TDDãƒ•ãƒ­ãƒ¼
/tsumiki:tdd-red           # ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆå¤±æ•—ï¼‰
/tsumiki:tdd-green         # æœ€å°å®Ÿè£…ï¼ˆæˆåŠŸï¼‰
/tsumiki:tdd-refactor      # ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
/tsumiki:tdd-verify-complete  # å“è³ªç¢ºèª
```

---

## æ¤œè¨¼æ‰‹é †

1. ãƒ†ã‚¹ãƒˆãŒå¤±æ•—ã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆRedï¼‰
2. æœ€å°é™ã®å®Ÿè£…ã§ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆGreenï¼‰
3. ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã‚‚ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
4. `pnpm test` ã§å…¨ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
5. `pnpm storybook` ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
6. `pnpm lint` ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã“ã¨ã‚’ç¢ºèª

---

## å‚è€ƒè³‡æ–™

- [interfaces.ts - MyDeckListProps](../../../docs/design/deck-management-extension/interfaces.ts)
- [React Testing Library](https://testing-library.com/docs/react-testing-library/intro/)
- [Storybook Documentation](https://storybook.js.org/docs)
