name = "shadowverse-battle-log"
main = "src/index.ts"
compatibility_date = "2025-11-25"
compatibility_flags = ["nodejs_compat"]

# Cloudflare Workers 設定
workers_dev = true

# 環境変数（ローカル開発用）
[vars]
ENVIRONMENT = "development"
API_VERSION = "v1"
# Cloudflare Access 認証設定（開発用）
# 本番環境では wrangler secret コマンドで設定
CF_ACCESS_TEAM_DOMAIN = "your-team.cloudflareaccess.com"
CF_ACCESS_AUD = "your-application-aud-tag"
ALLOWED_ORIGINS = "http://localhost:5173"

# D1 Database バインディング
[[d1_databases]]
binding = "DB"
database_name = "shadowverse-db"
database_id = "fd5dbb0e-c674-47c1-8795-0865e46c9bf7"

# 注記: R2は使用しない方針に変更しました

# 本番環境設定
[env.production]
workers_dev = false
routes = [
  { pattern = "api.shadowverse-log.example.com/*", zone_name = "example.com" }
]

[env.production.vars]
ENVIRONMENT = "production"
API_VERSION = "v1"
# Cloudflare Access 認証設定（本番環境）
# 実際の値は Cloudflare Dashboard または wrangler secret コマンドで設定
CF_ACCESS_TEAM_DOMAIN = "your-team.cloudflareaccess.com"
CF_ACCESS_AUD = "your-application-aud-tag"
ALLOWED_ORIGINS = "https://your-app.pages.dev"
